{"name":"dhlocal","tables":[{"name":"public.schema_migrations","type":"BASE TABLE","columns":[{"name":"version","type":"bigint","nullable":false},{"name":"dirty","type":"boolean","nullable":false}],"indexes":[{"name":"schema_migrations_pkey","def":"CREATE UNIQUE INDEX schema_migrations_pkey ON public.schema_migrations USING btree (version)","table":"public.schema_migrations","columns":["version"]}],"constraints":[{"name":"schema_migrations_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (version)","table":"public.schema_migrations","referenced_table":"","columns":["version"]}]},{"name":"public.api_keys","type":"BASE TABLE","comment":"APIKEYテーブル","columns":[{"name":"id","type":"varchar(256)","nullable":false,"default":"gen_random_uuid()","comment":"APIKEYID"},{"name":"api_key","type":"varchar(256)","nullable":false,"comment":"APIKEY"},{"name":"application_name","type":"varchar(256)","nullable":false,"comment":"アプリケーション名"},{"name":"application_attribute","type":"varchar(256)","nullable":false,"comment":"アプリケーション属性(DataSpace,Application,Traceability)"},{"name":"deleted_at","type":"timestamp without time zone","nullable":true,"comment":"論理削除日時"},{"name":"created_at","type":"timestamp without time zone","nullable":false,"comment":"作成日時"},{"name":"created_user_id","type":"text","nullable":false,"comment":"作成ユーザ"},{"name":"updated_at","type":"timestamp without time zone","nullable":false,"comment":"更新日時"},{"name":"updated_user_id","type":"text","nullable":false,"comment":"更新ユーザ"}],"indexes":[{"name":"api_key_unique","def":"CREATE UNIQUE INDEX api_key_unique ON public.api_keys USING btree (api_key)","table":"public.api_keys","columns":["api_key"]},{"name":"api_keys_pkey","def":"CREATE UNIQUE INDEX api_keys_pkey ON public.api_keys USING btree (id)","table":"public.api_keys","columns":["id"]}],"constraints":[{"name":"api_key_unique","type":"UNIQUE","def":"UNIQUE (api_key)","table":"public.api_keys","referenced_table":"","columns":["api_key"]},{"name":"api_keys_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"public.api_keys","referenced_table":"","columns":["id"]}]},{"name":"public.cidrs","type":"BASE TABLE","comment":"CIDRテーブル","columns":[{"name":"cidr","type":"varchar(18)","nullable":false,"comment":"CIDR"},{"name":"api_key","type":"varchar(256)","nullable":false,"comment":"APIキー(外部Key)"},{"name":"deleted_at","type":"timestamp without time zone","nullable":true,"comment":"論理削除日時"},{"name":"created_at","type":"timestamp without time zone","nullable":false,"comment":"作成日時"},{"name":"created_user_id","type":"text","nullable":false,"comment":"作成ユーザ"},{"name":"updated_at","type":"timestamp without time zone","nullable":false,"comment":"更新日時"},{"name":"updated_user_id","type":"text","nullable":false,"comment":"更新ユーザ"}],"indexes":[{"name":"cidrs_pkey","def":"CREATE UNIQUE INDEX cidrs_pkey ON public.cidrs USING btree (cidr, api_key)","table":"public.cidrs","columns":["cidr","api_key"]}],"constraints":[{"name":"cidrs_api_key_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (api_key) REFERENCES api_keys(api_key) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.cidrs","referenced_table":"api_keys","columns":["api_key"],"referenced_columns":["api_key"]},{"name":"cidrs_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (cidr, api_key)","table":"public.cidrs","referenced_table":"","columns":["cidr","api_key"]}]},{"name":"public.operators","type":"BASE TABLE","comment":"事業者テーブル","columns":[{"name":"operator_id","type":"varchar(256)","nullable":false,"comment":"事業者識別子（LEIコード等一意になる文字列を想定）"},{"name":"operator_name","type":"varchar(256)","nullable":false,"comment":"企業名"},{"name":"deleted_at","type":"timestamp without time zone","nullable":true,"comment":"論理削除日時"},{"name":"created_at","type":"timestamp without time zone","nullable":false,"comment":"作成日時"},{"name":"created_user_id","type":"text","nullable":false,"comment":"作成ユーザ"},{"name":"updated_at","type":"timestamp without time zone","nullable":false,"comment":"更新日時"},{"name":"updated_user_id","type":"text","nullable":false,"comment":"更新ユーザ"},{"name":"operator_address","type":"varchar(256)","nullable":false,"comment":"事業者所在地"},{"name":"open_operator_id","type":"varchar(20)","nullable":false,"comment":"公開事業者識別子"},{"name":"global_operator_id","type":"varchar(256)","nullable":true,"comment":"事業者識別子（グローバル）"}],"indexes":[{"name":"operators_pkey","def":"CREATE UNIQUE INDEX operators_pkey ON public.operators USING btree (operator_id)","table":"public.operators","columns":["operator_id"]},{"name":"unique_global_operator_id","def":"CREATE UNIQUE INDEX unique_global_operator_id ON public.operators USING btree (global_operator_id)","table":"public.operators","columns":["global_operator_id"]},{"name":"unique_open_operator_id","def":"CREATE UNIQUE INDEX unique_open_operator_id ON public.operators USING btree (open_operator_id)","table":"public.operators","columns":["open_operator_id"]}],"constraints":[{"name":"operators_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (operator_id)","table":"public.operators","referenced_table":"","columns":["operator_id"]},{"name":"unique_global_operator_id","type":"UNIQUE","def":"UNIQUE (global_operator_id)","table":"public.operators","referenced_table":"","columns":["global_operator_id"]},{"name":"unique_open_operator_id","type":"UNIQUE","def":"UNIQUE (open_operator_id)","table":"public.operators","referenced_table":"","columns":["open_operator_id"]}]},{"name":"public.apikey_operators","type":"BASE TABLE","columns":[{"name":"api_key","type":"varchar(256)","nullable":false,"comment":"APIキー(外部Key)"},{"name":"operator_id","type":"varchar(256)","nullable":false,"comment":"事業者識別子（外部Key）"},{"name":"deleted_at","type":"timestamp without time zone","nullable":true,"comment":"論理削除日時"},{"name":"created_at","type":"timestamp without time zone","nullable":false,"comment":"作成日時"},{"name":"created_user_id","type":"text","nullable":false,"comment":"作成ユーザ"},{"name":"updated_at","type":"timestamp without time zone","nullable":false,"comment":"更新日時"},{"name":"updated_user_id","type":"text","nullable":false,"comment":"更新ユーザ"}],"indexes":[{"name":"apikey_operators_pkey","def":"CREATE UNIQUE INDEX apikey_operators_pkey ON public.apikey_operators USING btree (api_key, operator_id)","table":"public.apikey_operators","columns":["api_key","operator_id"]}],"constraints":[{"name":"apikey_operators_api_key_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (api_key) REFERENCES api_keys(api_key) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.apikey_operators","referenced_table":"api_keys","columns":["api_key"],"referenced_columns":["api_key"]},{"name":"apikey_operators_operator_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (operator_id) REFERENCES operators(operator_id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.apikey_operators","referenced_table":"operators","columns":["operator_id"],"referenced_columns":["operator_id"]},{"name":"apikey_operators_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (api_key, operator_id)","table":"public.apikey_operators","referenced_table":"","columns":["api_key","operator_id"]}]},{"name":"public.plants","type":"BASE TABLE","comment":"事業所テーブル","columns":[{"name":"plant_id","type":"varchar(256)","nullable":false,"comment":"事業所識別子"},{"name":"operator_id","type":"varchar(256)","nullable":false,"comment":"事業者識別子（外部Key）"},{"name":"plant_name","type":"varchar(256)","nullable":false,"comment":"事業所名"},{"name":"plant_address","type":"varchar(256)","nullable":false,"comment":"事業所所在値（住所）"},{"name":"deleted_at","type":"timestamp without time zone","nullable":true,"comment":"論理削除日時"},{"name":"created_at","type":"timestamp without time zone","nullable":false,"comment":"作成日時"},{"name":"created_user_id","type":"text","nullable":false,"comment":"作成ユーザ"},{"name":"updated_at","type":"timestamp without time zone","nullable":false,"comment":"更新日時"},{"name":"updated_user_id","type":"text","nullable":false,"comment":"更新ユーザ"},{"name":"open_plant_id","type":"varchar(26)","nullable":false,"comment":"公開事業所識別子"},{"name":"global_plant_id","type":"varchar(256)","nullable":true,"comment":"事業所識別子（グローバル）"}],"indexes":[{"name":"plants_pkey","def":"CREATE UNIQUE INDEX plants_pkey ON public.plants USING btree (plant_id, operator_id)","table":"public.plants","columns":["plant_id","operator_id"]},{"name":"unique_global_plant_id_operator_id","def":"CREATE UNIQUE INDEX unique_global_plant_id_operator_id ON public.plants USING btree (operator_id, global_plant_id)","table":"public.plants","columns":["operator_id","global_plant_id"]},{"name":"unique_open_plant_id_operator_id","def":"CREATE UNIQUE INDEX unique_open_plant_id_operator_id ON public.plants USING btree (operator_id, open_plant_id)","table":"public.plants","columns":["operator_id","open_plant_id"]}],"constraints":[{"name":"plants_operator_id_fkey","type":"FOREIGN KEY","def":"FOREIGN KEY (operator_id) REFERENCES operators(operator_id) ON UPDATE CASCADE ON DELETE CASCADE","table":"public.plants","referenced_table":"operators","columns":["operator_id"],"referenced_columns":["operator_id"]},{"name":"plants_pkey","type":"PRIMARY KEY","def":"PRIMARY KEY (plant_id, operator_id)","table":"public.plants","referenced_table":"","columns":["plant_id","operator_id"]},{"name":"unique_global_plant_id_operator_id","type":"UNIQUE","def":"UNIQUE (operator_id, global_plant_id)","table":"public.plants","referenced_table":"","columns":["operator_id","global_plant_id"]},{"name":"unique_open_plant_id_operator_id","type":"UNIQUE","def":"UNIQUE (operator_id, open_plant_id)","table":"public.plants","referenced_table":"","columns":["operator_id","open_plant_id"]}]}],"relations":[{"table":"public.cidrs","columns":["api_key"],"cardinality":"zero_or_more","parent_table":"public.api_keys","parent_columns":["api_key"],"parent_cardinality":"exactly_one","def":"FOREIGN KEY (api_key) REFERENCES api_keys(api_key) ON UPDATE CASCADE ON DELETE CASCADE"},{"table":"public.apikey_operators","columns":["api_key"],"cardinality":"zero_or_more","parent_table":"public.api_keys","parent_columns":["api_key"],"parent_cardinality":"exactly_one","def":"FOREIGN KEY (api_key) REFERENCES api_keys(api_key) ON UPDATE CASCADE ON DELETE CASCADE"},{"table":"public.apikey_operators","columns":["operator_id"],"cardinality":"zero_or_more","parent_table":"public.operators","parent_columns":["operator_id"],"parent_cardinality":"exactly_one","def":"FOREIGN KEY (operator_id) REFERENCES operators(operator_id) ON UPDATE CASCADE ON DELETE CASCADE"},{"table":"public.plants","columns":["operator_id"],"cardinality":"zero_or_more","parent_table":"public.operators","parent_columns":["operator_id"],"parent_cardinality":"exactly_one","def":"FOREIGN KEY (operator_id) REFERENCES operators(operator_id) ON UPDATE CASCADE ON DELETE CASCADE"}],"driver":{"name":"postgres","database_version":"PostgreSQL 15.12 (Debian 15.12-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit","meta":{"current_schema":"public","search_paths":["dhuser","public"],"dict":{"Functions":"Stored procedures and functions"}}}}
